#!/usr/bin/env bash

# Usage (from repo root):
#   source scripts/set_password
# or
#   . scripts/set_password
#
# This sets APP_PASSWORD in your current shell from backend/.env.

ROOT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")/.." && pwd)"
ENV_FILE="$ROOT_DIR/backend/.env"

if [ ! -f "$ENV_FILE" ]; then
  echo "backend/.env not found at $ENV_FILE" >&2
  return 1 2>/dev/null || exit 1
fi

APP_PASSWORD_VALUE="$(grep '^APP_PASSWORD=' "$ENV_FILE" | cut -d= -f2-)"

if [ -z "$APP_PASSWORD_VALUE" ]; then
  echo "APP_PASSWORD not found in backend/.env" >&2
  return 1 2>/dev/null || exit 1
fi

export APP_PASSWORD="$APP_PASSWORD_VALUE"
echo "APP_PASSWORD set from backend/.env"

